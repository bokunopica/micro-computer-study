STACK SEGMENT STACK
    DW 256 DUP(?)
    TOP LABEL WORD
STACK ENDS
DATA SEGMENT
    SOURCE DB 500 DUP(?)
    DESTINATION DB 500 DUP(?)
    NUMBER DB 0
DATA ENDS
CODE SEGMENT
ASSUME CS:CODE, DS:DATA, ES:DATA, SS:STACK
START:
    MOV AX, DATA
    MOV DX, AX
    MOV ES, AX
    MOV AX, STACK
    MOV SS, AX
    LEA SP, TOP
    ; 用户程序
    LEA SI, SOURCE
    LEA DI, DESTINATION
    MOV CX, 500
L1: MOV AL, [SI]
    MOV AH, AL
    CMP AL, 0FFH
    JNZ NCLEAR
    JZ CLEAR
CLEAR:
    XOR AL, AL
    JMP NEXT
NCLEAR: 
    INC NUMBER
    JMP NEXT
NEXT:
    MOV [DI], AL
    INC SI
    INC DI
    LOOP N1
    
M_END:
    MOV AH, 4CH
    INT 21H
CODE ENDS
END START
